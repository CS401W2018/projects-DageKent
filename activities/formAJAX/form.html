<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form</title>
    <link rel="stylesheet" href="styling.css">
</head>
<body>
    <header>
        <h1>Web Design</h1>
    </header>
<main>
        <form action="processing.html" method="get" id="myForm">
            <fieldset>
                <legend> Account info</legend>
            <div class="form-row">
                <label for="fullname">Full Name:</label>
                <input type="text" name="fullname" id="fullname" placeholder="Full Name">
            </div>
            <div class="form-row">
                <label for="mail">E-mail:</label>
                 <input type="email" name="email" value="kent@byuh.edu" id="mail" >
            </div>
            
            <div class="form-row">
                <label for="pass">Password</label>
                <input type="password" name="Password" id="pass">
            </div>
            <div class="form-row">
                <label for="age">Age:</label>
                <input type="number" name="Age" id="age" >
            </div>

            <div class="form-row">
                <label for="state">State:</label>
                <select name="state" id="state">
                    <option value="CO">Colorado</option>
                    <option value="ID" selected>Idaho</option>
                    <option value="HI">Hawaii</option>
                </select>
            </div>
            <div class="radio-row">
                <div class="form-spacer">Year in School:</div>
                <label><input type="radio" name="year" value="Freshman"> Freshman</label>
                <label><input type="radio" name="year" value="Sophmore"> Sophmore</label>
            </div>
            
            <div class="form-row">
                <label for="comments">comments:</label>               
                <textarea name="comments" id="comments"></textarea>
            </div>
            <div class="form-row">
                <label><input type="checkbox" name="agree" id="agree" checked> Remember me</label>
           </div>
            <div class="form-row">
                <div class="form-spacer"></div>
                <input type="submit">
            </div>
        </fieldset>
    </form>
    <h2>What is AJAX?</h2>
    <p>It is a technique of asynchronous data exchange between the a web site and a server.
        It allow a web site to update content without refresh the page.</p>
    <h2>Why do you put your JS Code in a separate file?</h2>
    <p>It can make the code clearer,easier to manage and revise.
         Also the browser can cache JS code, reduce repeat loading.
         Many web pages can share same JS code that make web disign more efficient.</p>

</main>

    <footer>
        <p>&copy; 2025 Kent</p>
    </footer>
    <script>
        document.getElementById("myForm").addEventListener("submit", function(event){
            event.preventDefault();
            /*alert("Form Submitted");*/

            const fullname = document.getElementById("fullname").value;
            const email = document.getElementById("mail").value;
            const pass = document.getElementById("pass").value;
            const age = document.getElementById("age").value;

            if (!fullname) {
                alert("You need to enter your name.");
                return;
            }

            if (!age || age<18) {
                alert("You need to be 18");
                return;
            }

            const formData = {
                fullname:fullname,
                email: email,
                password: pass
            };
            console.log(formData);
            const xhr = new XMLHttpRequest();
            xhr.open("GET", "submit.json", true);
            xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
            xhr.onreadystatechange = function (){
                if (xhr.readyState === 4 && xhr. status === 200) {
                    alert("Form submitted successfully.");
                } else if (xhr.readyState === 4) {
                    alert("Error submitting form.");
                }
            };
        });
        xhr.send(JSON.stringify(formData));
        alert(`Successs: ${fullname}`);
    </script>
</body>
</html>
